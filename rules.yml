groups:
    - name : rule1
      rules:
      - alert: InstanceDown
        expr: up == 0
        for: 2s
    
    - name : rule2
      rules:
      - alert: Exceptions
        expr: flask_app_exceptions_total ==1
        for: 2s
        
    - name : rule3
      rules:
      - alert: Windows Server CPU Usage >80
        expr: 100 - (avg by (instance) (rate(windows_cpu_time_total{mode="idle"}[2m])) * 100) > 80
        for: 5m
    
    - name : rule4
      rules:
      - alert: Windows Service state is not OK
        expr: windows_service_status{status="ok"} != 1
        for: 5m